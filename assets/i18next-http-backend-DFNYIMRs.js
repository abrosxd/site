import{c as b,g as $}from"./classnames-r5axgyEj.js";import{r as I}from"./cross-fetch-DjKGttg3.js";function U(r,e){for(var n=0;n<e.length;n++){const t=e[n];if(typeof t!="string"&&!Array.isArray(t)){for(const o in t)if(o!=="default"&&!(o in r)){const i=Object.getOwnPropertyDescriptor(t,o);i&&Object.defineProperty(r,o,i.get?i:{enumerable:!0,get:()=>t[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}function w(r){"@babel/helpers - typeof";return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(r)}function A(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":w(XMLHttpRequest))==="object"}function N(r){return!!r&&typeof r.then=="function"}function W(r){return N(r)?r:Promise.resolve(r)}function B(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var P={exports:{}};(function(r,e){var n;if(typeof fetch=="function"&&(typeof b<"u"&&b.fetch?n=b.fetch:typeof window<"u"&&window.fetch?n=window.fetch:n=fetch),typeof B<"u"&&typeof window>"u"){var t=n||I();t.default&&(t=t.default),e.default=t,r.exports=e.default}})(P,P.exports);var T=P.exports;const M=$(T),S=U({__proto__:null,default:M},[T]);function _(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function H(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_(Object(n),!0).forEach(function(t){K(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function K(r,e,n){return e=x(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function x(r){var e=G(r,"string");return h(e)=="symbol"?e:e+""}function G(r,e){if(h(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var t=n.call(r,e||"default");if(h(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function h(r){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(r)}var y;typeof fetch=="function"&&(typeof global<"u"&&global.fetch?y=global.fetch:typeof window<"u"&&window.fetch?y=window.fetch:y=fetch);var g;A()&&(typeof global<"u"&&global.XMLHttpRequest?g=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(g=window.XMLHttpRequest));var m;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?m=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(m=window.ActiveXObject));!y&&S&&!g&&!m&&(y=M||S);typeof y!="function"&&(y=void 0);var j=function(e,n){if(n&&h(n)==="object"){var t="";for(var o in n)t+="&"+encodeURIComponent(o)+"="+encodeURIComponent(n[o]);if(!t)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+t.slice(1)}return e},X=function(e,n,t,o){var i=function(s){if(!s.ok)return t(s.statusText||"Error",{status:s.status});s.text().then(function(l){t(null,{status:s.status,data:l})}).catch(t)};if(o){var f=o(e,n);if(f instanceof Promise){f.then(i).catch(t);return}}typeof fetch=="function"?fetch(e,n).then(i).catch(t):y(e,n).then(i).catch(t)},E=!1,J=function(e,n,t,o){e.queryStringParams&&(n=j(n,e.queryStringParams));var i=H({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(i["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),t&&(i["Content-Type"]="application/json");var f=typeof e.requestOptions=="function"?e.requestOptions(t):e.requestOptions,a=H({method:t?"POST":"GET",body:t?e.stringify(t):void 0,headers:i},E?{}:f),s=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{X(n,a,o,s)}catch(l){if(!f||Object.keys(f).length===0||!l.message||l.message.indexOf("not implemented")<0)return o(l);try{Object.keys(f).forEach(function(u){delete a[u]}),X(n,a,o,s),E=!0}catch(u){o(u)}}},Q=function(e,n,t,o){t&&h(t)==="object"&&(t=j("",t).slice(1)),e.queryStringParams&&(n=j(n,e.queryStringParams));try{var i;g?i=new g:i=new m("MSXML2.XMLHTTP.3.0"),i.open(t?"POST":"GET",n,1),e.crossDomain||i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.withCredentials=!!e.withCredentials,t&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.overrideMimeType&&i.overrideMimeType("application/json");var f=e.customHeaders;if(f=typeof f=="function"?f():f,f)for(var a in f)i.setRequestHeader(a,f[a]);i.onreadystatechange=function(){i.readyState>3&&o(i.status>=400?i.statusText:null,{status:i.status,data:i.responseText})},i.send(t)}catch(s){console&&console.log(s)}},z=function(e,n,t,o){if(typeof t=="function"&&(o=t,t=void 0),o=o||function(){},y&&n.indexOf("file:")!==0)return J(e,n,t,o);if(A()||typeof ActiveXObject=="function")return Q(e,n,t,o);o(new Error("No fetch and no xhr implementation found!"))};function v(r){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(r)}function R(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function O(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R(Object(n),!0).forEach(function(t){L(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function V(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Y(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,D(t.key),t)}}function Z(r,e,n){return e&&Y(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function L(r,e,n){return e=D(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function D(r){var e=k(r,"string");return v(e)=="symbol"?e:e+""}function k(r,e){if(v(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var t=n.call(r,e||"default");if(v(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var ee=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,t,o){return L({},t,o||"")},parseLoadPayload:function(n,t){},request:z,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},te=function(){function r(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(this,r),this.services=e,this.options=n,this.allOptions=t,this.type="backend",this.init(e,n,t)}return Z(r,[{key:"init",value:function(n){var t=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=n,this.options=O(O(O({},ee()),this.options||{}),o),this.allOptions=i,this.services&&this.options.reloadInterval){var f=setInterval(function(){return t.reload()},this.options.reloadInterval);v(f)==="object"&&typeof f.unref=="function"&&f.unref()}}},{key:"readMulti",value:function(n,t,o){this._readAny(n,n,t,t,o)}},{key:"read",value:function(n,t,o){this._readAny([n],n,[t],t,o)}},{key:"_readAny",value:function(n,t,o,i,f){var a=this,s=this.options.loadPath;typeof this.options.loadPath=="function"&&(s=this.options.loadPath(n,o)),s=W(s),s.then(function(l){if(!l)return f(null,{});var u=a.services.interpolator.interpolate(l,{lng:n.join("+"),ns:o.join("+")});a.loadUrl(u,f,t,i)})}},{key:"loadUrl",value:function(n,t,o,i){var f=this,a=typeof o=="string"?[o]:o,s=typeof i=="string"?[i]:i,l=this.options.parseLoadPayload(a,s);this.options.request(this.options,n,l,function(u,c){if(c&&(c.status>=500&&c.status<600||!c.status))return t("failed loading "+n+"; status code: "+c.status,!0);if(c&&c.status>=400&&c.status<500)return t("failed loading "+n+"; status code: "+c.status,!1);if(!c&&u&&u.message&&u.message.indexOf("Failed to fetch")>-1)return t("failed loading "+n+": "+u.message,!0);if(u)return t(u,!1);var d,p;try{typeof c.data=="string"?d=f.options.parse(c.data,o,i):d=c.data}catch{p="failed parsing "+n+" to json"}if(p)return t(p,!1);t(null,d)})}},{key:"create",value:function(n,t,o,i,f){var a=this;if(this.options.addPath){typeof n=="string"&&(n=[n]);var s=this.options.parsePayload(t,o,i),l=0,u=[],c=[];n.forEach(function(d){var p=a.options.addPath;typeof a.options.addPath=="function"&&(p=a.options.addPath(d,t));var q=a.services.interpolator.interpolate(p,{lng:d,ns:t});a.options.request(a.options,q,s,function(C,F){l+=1,u.push(C),c.push(F),l===n.length&&typeof f=="function"&&f(u,c)})})}}},{key:"reload",value:function(){var n=this,t=this.services,o=t.backendConnector,i=t.languageUtils,f=t.logger,a=o.language;if(!(a&&a.toLowerCase()==="cimode")){var s=[],l=function(c){var d=i.toResolveHierarchy(c);d.forEach(function(p){s.indexOf(p)<0&&s.push(p)})};l(a),this.allOptions.preload&&this.allOptions.preload.forEach(function(u){return l(u)}),s.forEach(function(u){n.allOptions.ns.forEach(function(c){o.read(u,c,"read",null,null,function(d,p){d&&f.warn("loading namespace ".concat(c," for language ").concat(u," failed"),d),!d&&p&&f.log("loaded namespace ".concat(c," for language ").concat(u),p),o.loaded("".concat(u,"|").concat(c),d,p)})})})}}}])}();te.type="backend";export{te as B};
